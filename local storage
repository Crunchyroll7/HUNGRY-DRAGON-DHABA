function addToCartQuantity(name, price, id) {
  const quantitySpan = document.getElementById("quantity-" + id);
  let quantity = parseInt(quantitySpan.innerText);

  if (quantity === 0) {
    alert("Please select at least one quantity!");
    return;
  }

  // Retrieve cart from localStorage (if exists)
  let cart = JSON.parse(localStorage.getItem("cart")) || {};

  // If item already exists, update its quantity
  if (cart[name]) {
    cart[name].quantity += quantity;
  } else {
    cart[name] = { price: price, quantity: quantity };
  }

  // Store the updated cart back in localStorage
  localStorage.setItem("cart", JSON.stringify(cart));

  alert(`${quantity} x ${name} added to cart!`);

  // Reset quantity display to 0
  quantitySpan.innerText = 0;

  // Update cart UI immediately
  updateCartDisplay();
}

function updateCartDisplay() {
  const storedCart = JSON.parse(localStorage.getItem("cart")) || {};

  Object.keys(storedCart).forEach(name => {
    const id = getId(name);
    const quantitySpan = document.getElementById("quantity-" + id);

    if (quantitySpan) {
      quantitySpan.innerText = storedCart[name].quantity;
    }
  });
}

// Ensure cart displays correctly on page load
window.onload = updateCartDisplay;
